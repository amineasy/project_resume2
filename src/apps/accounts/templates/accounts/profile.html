{% extends 'base.html' %}
{% load static %}

{% block title %}پروفایل{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="{% static 'accounts/css/profile.css' %}">
{% endblock %}

{% block body %}
    <div id="profile-content">
        <p><strong>ایمیل:</strong> {{ user.email }}</p>
        <p><strong>نام:</strong> {{ user.first_name }}</p>
        <p><strong>نام خانوادگی:</strong> {{ user.last_name }}</p>
        <p><strong>شماره تلفن:</strong> {{ user.phone }}</p>
        <p><strong>آدرس:</strong> {{ profile.address }}</p>
        <p><strong>بیو:</strong> {{ profile.bio }}</p>
        <div class="dropdown">
            <button class="dropbtn">گزینه‌ها</button>
            <div class="dropdown-content">
                <a href="{% url 'accounts:edit-profile' %}">ویرایش پروفایل</a>
                <a href="{% url 'accounts:logout' %}">خروج از حساب کاربری</a>
            </div>
        </div>
    </div>

    <div id="loading">
        <div class="loading-container">
            <p>در حال بارگذاری پروفایل...</p>
            <div class="spinner"></div>
        </div>
    </div>

    <script>
        window.onload = function() {
            try {
                // مخفی کردن لودینگ
                const loading = document.getElementById('loading');
                const profileContent = document.getElementById('profile-content');
                loading.style.display = 'none';
                // نمایش پروفایل با انیمیشن
                profileContent.style.display = 'block';
                profileContent.classList.add('show');
            } catch (error) {
                console.error('خطا در بارگذاری پروفایل:', error);
                // در صورت خطا، لودینگ را مخفی و پروفایل را نمایش بده
                document.getElementById('loading').style.display = 'none';
                document.getElementById('profile-content').style.display = 'block';
            }
        };
    </script>
{% endblock %}